
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title> Dear, Thmuoi </title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#fff6f4;
      --bg2:#fffaf9;
      --vintage:#f7eae0;
      --paper:#fff8f0;
      --accent:#d86f88;
      --text:#5b3d35;
    }
    *{box-sizing:border-box}
    body{margin:0; min-height:100vh; font-family:'Dancing Script', cursive; background:linear-gradient(180deg,var(--bg1),var(--bg2)); display:flex; align-items:center; justify-content:center; overflow:hidden; color:var(--text)}
    /* hearts canvas */
    #heartsCanvas{position:fixed; inset:0; z-index:0; pointer-events:none}

    /* tulip corner decor */
    .tulip{position:fixed; z-index:2; width:110px; height:110px; opacity:0.95; pointer-events:none}
    .tulip.small{width:72px;height:72px}

    /* stage */
    .stage{position:relative; z-index:4; width:100%; height:100vh; display:flex; align-items:center; justify-content:center; padding:24px}

    /* envelope (vintage) */
    .envelope-wrap{position:relative; width:480px; height:320px; display:flex; align-items:center; justify-content:center}
    .envelope{width:440px; height:280px; background:var(--vintage); border-radius:10px; box-shadow:0 24px 50px rgba(15,23,42,0.12); position:relative; transform-origin:center; cursor:pointer; transition:transform .6s ease, opacity .6s ease}
    .envelope.hover{transform:translateY(-6px) scale(1.01)}
    .flap{position:absolute; left:0; right:0; top:-2px; height:140px; background:linear-gradient(180deg,#f2d6c9,#fff); border-top-left-radius:10px; border-top-right-radius:10px; transform-origin:top center; transition:transform .9s cubic-bezier(.2,.9,.3,1); clip-path: polygon(0 0, 100% 0, 50% 100%); box-shadow: inset 0 -6px 14px rgba(0,0,0,0.08)}
    .seal{position:absolute; top:52%; left:50%; transform:translate(-50%,-50%); width:48px; height:48px; background:var(--accent); border-radius:50%; box-shadow: 0 8px 20px rgba(216,111,136,0.18); z-index:6; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; cursor:pointer}
    .string{position:absolute; width:78px; height:3px; background:linear-gradient(90deg,#d86f88,#ffc7d6); top:52%; left:50%; transform:translate(-50%,-50%); border-radius:4px; z-index:5; box-shadow:0 2px 6px rgba(0,0,0,0.06)}

    /* little hearts floating */
    .heart-decor{position:absolute; width:16px; height:16px; transform-origin:center; z-index:6}
    .heart-anim{animation:floaty 3.6s ease-in-out infinite}
    .heart-anim.delay1{animation-delay:.2s}
    .heart-anim.delay2{animation-delay:.4s}
    @keyframes floaty{0%{transform:translateY(0) translateX(0) scale(.95)}50%{transform:translateY(-10px) translateX(2px) scale(1.05)}100%{transform:translateY(0) translateX(0) scale(.95)}}

    /* letter (inside) - initial small */
    .letter{position:absolute; width:380px; height:220px; left:50%; top:50%; transform:translate(-50%,-50%) scale(.94); background:var(--paper); border-radius:10px; box-shadow:0 10px 30px rgba(15,23,42,0.08); padding:20px; text-align:center; opacity:0; pointer-events:none; transition:all .7s cubic-bezier(.2,.9,.3,1); z-index:7; border:1px solid rgba(0,0,0,0.04);}
    /* full-screen letter (expanded) */
    .letter.expanded{ width:80vw; max-width:840px; height:80vh; left:50%; top:50%; transform:translate(-50%,-50%) scale(1); opacity:1; pointer-events:auto; border-radius:12px; }
    .letter .inner{height:100%; padding:18px; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; justify-content:flex-start; position:relative; overflow:auto; border-radius:8px; background: linear-gradient(180deg,#fffdf8,#fff6ee);}
    /* floral border */
    .floral-border{position:absolute; inset:10px; border-radius:8px; pointer-events:none; opacity:0.95}
    .title{font-size:28px; color:var(--accent); margin:6px 0 10px 0}
    .message{font-size:18px; color:var(--text); line-height:1.55; max-height:78%; overflow:auto; padding:0 16px; white-space:pre-line; text-align:center}

    /* envelope open + lift */
    .envelope.open{ transform: translateY(-140px) rotate(-4deg) scale(1.02); }
    .envelope.fade{ opacity:0; transform: translateY(-220px) scale(.98) rotate(-6deg); pointer-events:none; }

    /* subtle focus overlay when letter expanded */
    .overlay{ position:fixed; inset:0; background:rgba(255,245,247,0.45); z-index:6; opacity:0; transition:opacity .45s ease; pointer-events:none; }
    .overlay.show{ opacity:1; pointer-events:none; }

    /* responsive tweaks */
    @media (max-width:520px){
      .envelope-wrap{width:340px;height:240px}
      .envelope{width:300px;height:200px}
      .letter{width:300px;height:180px}
      .letter.expanded{ width:92vw; height:78vh; }
      .title{font-size:22px}
      .message{font-size:16px}
    }

    /* controls */
    .controls{position:fixed; right:18px; bottom:18px; z-index:10}
    .btn{background:#fff;border-radius:10px;padding:8px 10px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 6px 18px rgba(11,15,30,0.04);cursor:pointer;font-family:inherit}
    .hint{position:fixed; left:18px; bottom:18px; z-index:10; color:#7b6a6a; font-size:13px}
    .yt-link{position:fixed; right:18px; top:18px; z-index:10; background:transparent; border:none; color:var(--accent); cursor:pointer; font-family:inherit}
  </style>
</head>
<body>
  <canvas id="heartsCanvas"></canvas>
  <div class="overlay" id="overlay"></div>

  <!-- tulip corners -->
  <div class="tulip" style="left:12px; top:12px; z-index:3;">
    <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
      <path d="M32 6c6 0 10 6 10 6s-4 6-10 6-10-6-10-6 4-6 10-6z" fill="#FFC1D9"/>
      <path d="M24 20c4 2 8 0 8 0s-2 6 2 10c-6-2-8 2-8 2s0-10-2-12z" fill="#FF85C0" opacity="0.9"/>
      <path d="M34 40c2 8 0 14 0 14s-6-6-8-14c2 6 6 6 8 0z" fill="#6FBF73"/>
    </svg>
  </div>
  <div class="tulip small" style="right:12px; top:10px; z-index:3;">
    <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
      <path d="M32 6c6 0 10 6 10 6s-4 6-10 6-10-6-10-6 4-6 10-6z" fill="#E0C7FF"/>
      <path d="M24 20c4 2 8 0 8 0s-2 6 2 10c-6-2-8 2-8 2s0-10-2-12z" fill="#CDA8FF" opacity="0.95"/>
      <path d="M34 40c2 8 0 14 0 14s-6-6-8-14c2 6 6 6 8 0z" fill="#6FBF73"/>
    </svg>
  </div>

  <div class="stage">
    <div class="envelope-wrap" aria-label="Phong bì thiệp">
      <div class="envelope" id="envelope" role="button" tabindex="0" aria-pressed="false" aria-label="Nhấn để mở thiệp">
        <div class="flap" id="flap"></div>
        <div class="string"></div>
        <div class="seal" id="seal" aria-hidden>✶</div>

        <!-- small heart floats -->
        <div class="heart-decor heart-anim" style="left:26%; top:30%;">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-7-4.35-9.2-7.2C-1.3 9.85 4.6 4 12 9c7.4-5 13.3.85 9.2 4.8C19 16.65 12 21 12 21z" fill="#FF85C0"/></svg>
        </div>
        <div class="heart-decor heart-anim delay1" style="left:60%; top:34%;">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-7-4.35-9.2-7.2C-1.3 9.85 4.6 4 12 9c7.4-5 13.3.85 9.2 4.8C19 16.65 12 21 12 21z" fill="#E0C7FF"/></svg>
        </div>
        <div class="heart-decor heart-anim delay2" style="left:50%; top:18%;">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 21s-7-4.35-9.2-7.2C-1.3 9.85 4.6 4 12 9c7.4-5 13.3.85 9.2 4.8C19 16.65 12 21 12 21z" fill="#FFF6F6"/></svg>
        </div>

        <!-- letter (hidden until open) -->
        <div class="letter" id="letter" aria-hidden="true">
          <div class="inner">
            <!-- floral border -->
            <svg class="floral-border" viewBox="0 0 400 240" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
              <defs><style>.p{fill:none;stroke:#ffd6e2;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;opacity:0.9}</style></defs>
              <rect x="6" y="6" width="388" height="228" rx="8" ry="8" fill="none" stroke="rgba(216,111,136,0.08)"/>
              <g class="p">
                <path d="M28 30c12 2 18 18 30 22" />
                <path d="M372 30c-12 2 -18 18 -30 22" />
                <path d="M28 210c12 -2 18 -18 30 -22" />
                <path d="M372 210c-12 -2 -18 -18 -30 -22" />
              </g>
              <!-- tulip corners -->
              <g transform="translate(16,12)" opacity="0.95">
                <path d="M24 4c4 0 6 4 6 4s-2 4-6 4-6-4-6-4 2-4 6-4z" fill="#FFD7EC"/>
                <path d="M20 18c3 1 5 0 5 0s-1 3 1 4c-3-1-4 1-4 1s0-5-2-5z" fill="#FFC1E6" opacity="0.95"/>
              </g>
              <g transform="translate(340,12) scale(-1,1)" opacity="0.95">
                <path d="M24 4c4 0 6 4 6 4s-2 4-6 4-6-4-6-4 2-4 6-4z" fill="#E0C7FF"/>
                <path d="M20 18c3 1 5 0 5 0s-1 3 1 4c-3-1-4 1-4 1s0-5-2-5z" fill="#CDA8FF" opacity="0.95"/>
              </g>
            </svg>

            <div class="title">Chúc mừng sinh nhật, babi Thmuoi!</div>
            <div class="message" id="message">
Chúc mừng sinh nhật babi Thmuoi nhé =)))

Năm nay xin slot chúc cuối để nhường slot đầu cho các azai khác on top thoi hẹ hẹ :3
Chúc em tuổi mới ngủ sớm hơn chút, yêu thương bản thân hơn chút,công việc thuận lợi 
hơn nhiều chút và đừng để ai làm em căng thẳng nhớ! (Nếu có thì mess cho mình =)) hẹ hẹ )

Mong mọi điều tốt đẹp đến với em một cách nhẹ nhàng và hạnh phúc đến với em
từ những điều bình dị nhất !! ^^ HPBD muoitrobeo *tung bông tung bông* 
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="controls"><button id="downloadBtn" class="btn">⬇ Tải trang</button></div>
  <div class="hint">Nhấp vào phong bì để mở thư — nhạc & pháo hoa tim sẽ xuất hiện.</div>

  <a class="yt-link" href="https://www.youtube.com/watch?v=sQlQpKpQOpc" target="_blank" rel="noopener">Nghe bài trên YouTube</a>

  <!-- hidden iframe for YT -->
  <div id="yt-player" style="display:none"></div>
  <iframe id="yt-iframe" style="display:none" src="https://www.youtube-nocookie.com/embed/sQlQpKpQOpc?enablejsapi=1&rel=0&modestbranding=1" allow="autoplay"></iframe>

  <script>
    /* Hearts falling background */
    const canvas = document.getElementById('heartsCanvas');
    const ctx = canvas.getContext('2d');
    let W = canvas.width = innerWidth, H = canvas.height = innerHeight;
    window.addEventListener('resize', ()=>{ W = canvas.width = innerWidth; H = canvas.height = innerHeight; });

    function rand(min,max){return Math.random()*(max-min)+min;}
    const hearts = [];
    function makeHeart(){ hearts.push({x:rand(0,W), y:rand(-H, -10), r:rand(8,20), vx:rand(-0.4,0.4), vy:rand(0.3,1.0), hue: [330,300,350,10][Math.floor(rand(0,4))], alpha:rand(0.6,0.95), sway:rand(0.3,1.4)}); }
    for(let i=0;i<110;i++) makeHeart();

    function drawHeart(x,y,r,hue,alpha){
      ctx.save(); ctx.translate(x,y); ctx.globalAlpha = alpha;
      ctx.beginPath();
      const s = r/2;
      ctx.moveTo(0, -s);
      ctx.bezierCurveTo(s,-s, s, s, 0, s*1.6);
      ctx.bezierCurveTo(-s, s, -s,-s, 0,-s);
      ctx.closePath();
      ctx.fillStyle = `hsl(${hue} 80% 70%)`;
      ctx.fill();
      ctx.restore();
    }
    function updateHearts(){
      ctx.clearRect(0,0,W,H);
      for(let i=hearts.length-1;i>=0;i--){
        const h = hearts[i];
        h.x += h.vx + Math.sin(h.sway * (Date.now()/1000))/6;
        h.y += h.vy;
        drawHeart(h.x,h.y,h.r,h.hue,h.alpha);
        if(h.y > H + 30){ hearts.splice(i,1); makeHeart(); }
      }
    }

    /* particle heart bursts (firework) */
    const particles = [];
    function spawnBurst(x,y,count=120){
      const hue = rand(320,360);
      for(let i=0;i<count;i++){
        const angle = Math.random()*Math.PI*2;
        const speed = Math.random()*4 + 1.2;
        particles.push({x,y, vx:Math.cos(angle)*speed, vy:Math.sin(angle)*speed, life: rand(40,110), r: rand(2,5), hue, alpha:1});
      }
    }
    function updateParticles(){
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.vy += 0.02; p.x += p.vx; p.y += p.vy; p.life -= 1; p.alpha = Math.max(0, p.life/110);
        drawHeart(p.x, p.y, p.r*1.6, p.hue, p.alpha);
        if(p.life<=0) particles.splice(i,1);
      }
    }

    function loop(){ requestAnimationFrame(loop); updateHearts(); updateParticles(); }
    loop();

    /* Envelope open sequence (Option B) */
    const envelope = document.getElementById('envelope');
    const letter = document.getElementById('letter');
    const overlay = document.getElementById('overlay');
    let opened = false;

    // YT API/player
    const YT_ID = 'sQlQpKpQOpc';
    let ytPlayer = null;
    function loadYTAPI(){
      if(window.YT && window.YT.Player){ initYT(); return; }
      const tag = document.createElement('script');
      tag.src = 'https://www.youtube.com/iframe_api';
      document.body.appendChild(tag);
      window.onYouTubeIframeAPIReady = initYT;
    }
    function initYT(){
      ytPlayer = new YT.Player('yt-player', {height:'0', width:'0', videoId: YT_ID, playerVars:{'playsinline':1,'rel':0,'modestbranding':1}});
    }
    function playYT(){ if(!ytPlayer) loadYTAPI(); else try{ ytPlayer.playVideo(); }catch(e){} }

    function openEnvelope(){
      if(opened) return;
      opened = true;
      // 1) flap open + envelope lift/rotate
      envelope.classList.add('open');
      // small delay then slide letter up and expand
      setTimeout(()=>{
        // show overlay for focus
        overlay.classList.add('show');
        // show letter (make visible small), then expand more dramatically
        letter.classList.add('expanded');
        // spawn bursts while expanding
        const cx = window.innerWidth/2, cy = window.innerHeight/2 - 40;
        for(let i=0;i<6;i++){ setTimeout(()=> spawnBurst(cx + rand(-140,140), cy + rand(-60,60), 110), i*120); }
        // fade envelope out after a short delay so letter covers it
        setTimeout(()=>{ envelope.classList.add('fade'); }, 520);
        // play music (user gesture allowed)
        playYT();
      }, 600);
    }

    // click events: clicking the seal or envelope opens
    document.getElementById('seal').addEventListener('click', (e)=>{ e.stopPropagation(); openEnvelope(); });
    envelope.addEventListener('click', ()=> openEnvelope() );
    envelope.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') { e.preventDefault(); openEnvelope(); } });

    // download button
    const downloadBtn = document.getElementById('downloadBtn');
    downloadBtn.addEventListener('click', ()=>{
      const blob = new Blob([document.documentElement.outerHTML], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'thiep-sinh-nhat-vintage-optionB.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });
  </script>
</body>
</html>


